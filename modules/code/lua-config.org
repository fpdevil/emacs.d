#+TITLE: Lua configuration for Emacs
#+AUTHOR: Sampath Singamsetty

#+begin_src emacs-lisp :lexical no
;;; -*- lexical-binding: t -*-
  ;; DO NOT EDIT THIS FILE DIRECTLY
  ;; This is a file generated from a literate programing source file
  ;; You should make any changes there and regenerate it from Emacs org-mode using C-c C-v t
  ;;
  ;; lua-config.el --- Lua module configuration
  ;; Author: Sampath Singamsetty
  ;; Keywords: lua
  ;;
  ;;; Commentary:
  ;; Lua, which means “moon” in Portuguese, is a lightweight and versatile
  ;; programming language that’s perfect for beginners and experienced
  ;; programmers alike. It is compact, efficient, and capable of performing
  ;; a variety of tasks. It is known for its simplicity, efficiency, and
  ;; ease of integration with other programming languages, particularly C and C++
  ;;
#+end_src

* Lua configuration
~lua-mode~ is a major mode for editing ~Lua~ sources in Emacs. It adds
support for ~Lua~ code files.
#+begin_src emacs-lisp :lexical no
;; lua-mode for editing `lua' source code files
(use-package lua-mode
  :defer t
  :mode ("\\.lua\\'" . lua-mode)
  :interpreter ("lua" . lua-mode)
  :hook ((lua-mode . lsp-deferred)
	 (lua-mode . flycheck-mode))
  :init
  ;; use an indentation width of two spaces
  (setq lua-indent-level 2)
  :config
  ;; some global settings for files
  (setq lua-indent-string-contents t))
#+end_src

** company-lua as completion backend
~company-lua~ is a ~company-mode~ completion backend for ~Lua~. This is
installed to get completion support for probable candidates using the
~company-mode~.

#+begin_src emacs-lisp :lexical no
;; ^`company-lsp' the completion backend for `company-mode'
;; Since this backend only gives completion results for lua
;; keywords it might be good to use company-lua in combination
;; with other backends instead adding it to company-backends
;; as single backend.
(defun aqua/lua-mode-company-init ()
  (setq-local company-backends '((company-lua
                                  company-etags
                                  company-dabbrev-code
                                  company-yasnippet))))



;; install company-lua
(use-package company-lua
  :quelpa (company-lua :fetcher github :repo "ptrv/company-lua")
  :after company
  :init
  (add-hook 'lua-mode-hook #'aqua/lua-mode-company-init))
#+end_src
